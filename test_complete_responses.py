#!/usr/bin/env python3
"""
–¢–µ—Å—Ç: –ø—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –æ—Ç–≤–µ—Ç—ã –ø–æ–ª–Ω—ã–µ –∏ –Ω–µ –æ–±—Ä—ã–≤–∞—é—Ç—Å—è
"""
import ai_brain

# –¢–µ—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å –∫–æ—Ç–æ—Ä—ã–π —Ç—Ä–µ–±—É–µ—Ç –¥–ª–∏–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
question = "–†–∞—Å—Å–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–æ –ø—Ä–æ –≤—Å–µ –≤–∞—à–∏ —É—Å–ª—É–≥–∏ –ø–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–π —Ä–∞–±–æ—Ç—ã, –∫–∞–∫ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∏ —Å–∫–æ–ª—å–∫–æ —Å—Ç–æ—è—Ç"

conversation = [
    {"role": "user", "message": question}
]

print("="*70)
print("üß™ –¢–ï–°–¢: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–Ω–æ—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ (–Ω–µ—Ç –æ–±—Ä—ã–≤–æ–≤ —Ñ—Ä–∞–∑)")
print("="*70)
print(f"\n–í–æ–ø—Ä–æ—Å: {question}\n")
print("–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞...")
print("-"*70)

response = ai_brain.ai_brain.generate_response(conversation)

print(response)
print("\n" + "="*70)
print("–ü–†–û–í–ï–†–ö–ê –ü–û–õ–ù–û–¢–´ –û–¢–í–ï–¢–ê:")
print("="*70)

# –ü—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –æ–±—Ä—ã–≤ —Ñ—Ä–∞–∑—ã
incomplete_endings = [
    ("–û–±—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –∑–∞–ø—è—Ç–æ–π", response.strip().endswith(',')),
    ("–û–±—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ '–∏'", response.strip().endswith(' –∏')),
    ("–û–±—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ '–∞'", response.strip().endswith(' –∞')),
    ("–û–±—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ '–≤'", response.strip().endswith(' –≤')),
    ("–û–±—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ '–¥–ª—è'", response.strip().endswith(' –¥–ª—è')),
    ("–û–±—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ '–ø–æ'", response.strip().endswith(' –ø–æ')),
    ("–û–±—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –¥–≤–æ–µ—Ç–æ—á–∏–∏ –±–µ–∑ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è", response.strip().endswith(':')),
]

# –•–æ—Ä–æ—à–∏–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è
good_endings = ['.', '!', '?', 'üòä', 'ü§ù', 'üí™']
ends_well = any(response.strip().endswith(ending) for ending in good_endings)

print(f"\nüìè –î–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞: {len(response)} —Å–∏–º–≤–æ–ª–æ–≤ (~{len(response.split())} —Å–ª–æ–≤)")
print(f"üìä –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å–∏–º–≤–æ–ª–æ–≤: ...{response[-50:]}")

has_problems = False
for check_name, is_incomplete in incomplete_endings:
    if is_incomplete:
        print(f"‚ùå {check_name}")
        has_problems = True

if ends_well:
    print(f"‚úÖ –û—Ç–≤–µ—Ç –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ: '{response.strip()[-1]}'")
else:
    print(f"‚ö†Ô∏è –û—Ç–≤–µ—Ç –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞: '{response.strip()[-20:]}'")
    has_problems = True

print("\n" + "="*70)
if not has_problems:
    print("‚úÖ –¢–ï–°–¢ –ü–†–û–ô–î–ï–ù! –û—Ç–≤–µ—Ç –ø–æ–ª–Ω—ã–π, —Ñ—Ä–∞–∑—ã –Ω–µ –æ–±—Ä—ã–≤–∞—é—Ç—Å—è!")
else:
    print("‚ùå –¢–ï–°–¢ –ù–ï –ü–†–û–ô–î–ï–ù! –ï—Å—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–∏ –æ–±—Ä—ã–≤–∞ —Ñ—Ä–∞–∑—ã!")
print("="*70)
